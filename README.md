# Моя информация

## Запуск проекта
1. Необходимо создать на компьютере базу данные Postgres с начальными таблицами: [*начальные сущности*](задание/README.md#сущности).
2. Изменить значения переменных окружения в файле .env: [необходимые переменные среды из задания](задание/README.md#настройка-приложения-производится-через-переменные-окружения)
3. Запустить миграции БД командой `go run cmd/migrate/new_models.go`
4. Запустить веб-сервис командой `go run cmd/app/main.go`
5. Подождать полного запуска, после этого веб-сервис станет доступен по адресу SERVER_ADDRESS.

## Запуск линтера
```shell
golangci-lint -c .golangci.yml run
```

## Спорные моменты
- Несмотря на то, что при POST bid можно выбрать тип пользователя, корректным значением является только User, потому что в логике написано "Предложения могут создавать пользователи от имени своей организации".
- В my-запросах username указан необязательным элементом, но я сделал его обязательным, потому что непонятно что выводит в случае его отсутствия.
- Голосовать можно за любое доступное предложение не типа "Canceled", создавать предложения можно на любые доступные тендеры.
- Тендер всегда доступен для изменения и редактирования ответственным организации, в стадии Published он доступен для просмотра (но не для редактирования) всем пользователям.
- Limit=0 приравнивается в дефолтному значению лимита (5).

# Начальная информация

## Структура проекта
В данном проекте находится типовой пример для сборки приложения в докере из находящящегося в проекте Dockerfile. Пример на Gradle используется исключительно в качестве шаблона, вы можете переписать проект как вам хочется - главное, что бы Dockerfile находился в корне проекта и приложение отвечало по порту 8080. Других требований нет.

## Задание
В папке "задание" размещена задача.

## Сбор и развертывание приложения
Приложение должно отвечать по порту `8080` (жестко задано в настройках деплоя). После деплоя оно будет доступно по адресу: `https://<имя_проекта>-<уникальный_идентификатор_группы_группы>.avito2024.codenrock.com`

Пример: Для кода из репозитория `/avito2024/cnrprod-team-27437/task1` сформируется домен

```
task1-5447.avito2024.codenrock.com
```

**Для удобства домен указывается в логе сборки**

Логи сборки проекта находятся на вкладке **CI/CD** -> **Jobs**.

Ссылка на собранный проект находится на вкладке **Deployments** -> **Environment**. Вы можете сразу открыть URL по кнопке "Open".

## Доступ к сервисам

### Kubernetes
На вашу команду выделен kubernetes namespace. Для подключения к нему используйте утилиту `kubectl` и `*.kube.config` файл, который вам выдадут организаторы.

Состояние namespace, работающие pods и логи приложений можно посмотреть по адресу [https://dashboard.avito2024.codenrock.com/](https://dashboard.avito2024.codenrock.com/). Для открытия дашборда необходимо выбрать авторизацию через Kubeconfig и указать путь до выданного вам `*.kube.config` файла



